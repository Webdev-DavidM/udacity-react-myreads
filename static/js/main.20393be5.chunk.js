(this["webpackJsonpmyreads-project"]=this["webpackJsonpmyreads-project"]||[]).push([[0],{24:function(e,t,a){e.exports=a(37)},30:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(22),s=a.n(o),c=a(6),l=a.n(c),u=a(16),i=a(7),h=a(9),d=a(10),m=a(12),k=a(11),p=a(15),f="https://reactnd-books-api.udacity.com",v=localStorage.token;v||(v=localStorage.token=Math.random().toString(36).substr(-8));var b={Accept:"application/json",Authorization:v},E=function(){return fetch("".concat(f,"/books"),{headers:b}).then((function(e){return e.json()})).then((function(e){return e.books}))},g=function(e,t){return fetch("".concat(f,"/books/").concat(e.id),{method:"PUT",headers:Object(p.a)(Object(p.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({shelf:t})}).then((function(e){return e.json()}))},y=function(e){return fetch("".concat(f,"/search"),{method:"POST",headers:Object(p.a)(Object(p.a)({},b),{},{"Content-Type":"application/json"}),body:JSON.stringify({query:e})}).then((function(e){return e.json()})).then((function(e){return e.books}))},N=(a(30),function(e){Object(m.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).handleEventChange=function(){var t=Object(i.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e.props.book,a.target.value);case 2:e.props.updateBookshelves();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(this.props.image,")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{onChange:function(t){return e.handleEventChange(t)},defaultValue:this.props.currentShelf},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},this.props.title),r.a.createElement("div",{className:"book-authors"},this.props.author))))}}]),a}(n.Component));function B(e){var t=e.books.map((function(t){return r.a.createElement(N,{book:t,image:t.imageLinks.smallThumbnail,title:t.title,author:t.authors,id:t.id,key:t.id,updateBookshelves:e.updateBookshelves,currentShelf:"currentlyReading"})}));return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},"Currently Reading"),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t)))}function j(e){var t=e.books.map((function(t){return r.a.createElement(N,{image:t.imageLinks.smallThumbnail,title:t.title,author:t.authors,id:t.id,key:t.id,book:t,updateBookshelves:e.updateBookshelves,currentShelf:"read"})}));return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},"Read"),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t)))}function S(e){var t=e.books.map((function(t){return r.a.createElement(N,{image:t.imageLinks.smallThumbnail,title:t.title,author:t.authors,id:t.id,book:t,key:t.id,updateBookshelves:e.updateBookshelves,currentShelf:"wantToRead"})}));return r.a.createElement("div",{className:"bookshelf"},r.a.createElement("h2",{className:"bookshelf-title"},"Want To Read"),r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t)))}function R(){return r.a.createElement(n.Fragment,null,r.a.createElement("div",{className:"list-books"},r.a.createElement("div",{className:"list-books-title"},r.a.createElement("h1",null,"MyReads"))))}var O=function(e){Object(m.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).addBookToShelf=function(){var t=Object(i.a)(l.a.mark((function t(a){return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,g(e.props.book,a.target.value);case 2:e.props.updateBookshelves();case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(n.Fragment,null,r.a.createElement("li",null,r.a.createElement("div",{className:"book"},r.a.createElement("div",{className:"book-top"},r.a.createElement("div",{className:"book-cover",style:{width:128,height:193,backgroundImage:"url(".concat(this.props.image,")")}}),r.a.createElement("div",{className:"book-shelf-changer"},r.a.createElement("select",{onChange:function(t){return e.addBookToShelf(t)},defaultValue:this.props.currentShelf},r.a.createElement("option",{value:"move",disabled:!0},"Move to..."),r.a.createElement("option",{value:"currentlyReading"},"Currently Reading"),r.a.createElement("option",{value:"wantToRead"},"Want to Read"),r.a.createElement("option",{value:"read"},"Read"),r.a.createElement("option",{value:"none"},"None")))),r.a.createElement("div",{className:"book-title"},this.props.title),r.a.createElement("div",{className:"book-authors"},this.props.author))))}}]),a}(n.Component);function w(e){var t=null;return e.books&&(t=e.books.map((function(t){return r.a.createElement(O,{image:t.imageLinks.smallThumbnail,title:t.title,author:t.authors,id:t.id,book:t,key:t.id,updateBookshelves:e.updateBookshelves,currentShelf:t.shelf})}))),r.a.createElement("div",{className:"bookshelf"},r.a.createElement("div",{className:"bookshelf-books"},r.a.createElement("ol",{className:"books-grid"},t)))}var T=a(1);var C=Object(T.e)((function(e){return r.a.createElement("div",{className:"search-books"},r.a.createElement("div",{className:"search-books-bar"},r.a.createElement("button",{className:"close-search",onClick:function(){e.history.push("/"),e.clearSearch()}},"Close"),r.a.createElement("div",{className:"search-books-input-wrapper"},r.a.createElement("input",{onChange:function(t){return e.searchForBooks(t)},type:"text",placeholder:"Search by title or author"}))),r.a.createElement("div",{className:"search-books-results"},r.a.createElement("ol",{className:"books-grid"},e.books.length?r.a.createElement("div",null," ",r.a.createElement(w,{books:e.books,addSearchedBook:e.updateBookshelves,updateBookshelves:e.updateBookshelves})):r.a.createElement("div",null,"No books found, please search again"))))})),x=a(14),F=function(e){Object(m.a)(a,e);var t=Object(k.a)(a);function a(){var e;Object(h.a)(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(e=t.call.apply(t,[this].concat(r))).state={currentlyReading:[],wantToRead:[],read:[],searchedBooks:[],showSearchPage:!1},e.clearSearch=function(){e.setState({searchedBooks:[]})},e.searchForBooks=function(){var t=Object(i.a)(l.a.mark((function t(a){var n,r,o,s,c;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=[],""!==a.target.value){t.next=3;break}return t.abrupt("return",e.setState({searchedBooks:n}));case 3:return t.next=5,y(a.target.value);case 5:if(!(r=t.sent).error){t.next=8;break}return t.abrupt("return",e.setState({searchedBooks:n}));case 8:o=r.filter((function(e){return e.imageLinks})),s=[].concat(Object(u.a)(e.state.currentlyReading),Object(u.a)(e.state.read),Object(u.a)(e.state.wantToRead)),o.map((function(e){var t="none";return s.map((function(a){return e.id===a.id?t=a.shelf:e.shelf=t})),e.shelf=t})),c=r.filter((function(e){return e.imageLinks})),e.setState({searchedBooks:c});case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateBookshelves=Object(i.a)(l.a.mark((function t(){var a,n,r,o;return l.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:a=t.sent,n=a.filter((function(e){return"currentlyReading"===e.shelf})),e.setState({currentlyReading:n}),r=a.filter((function(e){return"wantToRead"===e.shelf})),e.setState({wantToRead:r}),o=a.filter((function(e){return"read"===e.shelf})),e.setState({read:o});case 9:case"end":return t.stop()}}),t)}))),e.componentDidMount=function(){e.updateBookshelves()},e}return Object(d.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(n.Fragment,null,r.a.createElement(T.a,{exact:!0,path:"/search",render:function(){return r.a.createElement(C,{books:e.state.searchedBooks,addSearchedBook:e.updateBookshelves,updateBookshelves:e.updateBookshelves,searchForBooks:e.searchForBooks,clearSearch:e.clearSearch})}}),r.a.createElement("div",{className:"list-books-content"},r.a.createElement("div",null,r.a.createElement(T.a,{exact:!0,path:"/",render:function(){return r.a.createElement(n.Fragment,null,r.a.createElement(R,null),r.a.createElement(B,{books:e.state.currentlyReading,updateBookshelves:e.updateBookshelves,currentShelf:"currentlyReading"}),r.a.createElement(S,{books:e.state.wantToRead,updateBookshelves:e.updateBookshelves,currentShelf:"wantToRead"}),r.a.createElement(j,{books:e.state.read,updateBookshelves:e.updateBookshelves,currentShelf:"read"}),r.a.createElement("div",{className:"open-search"},r.a.createElement(x.b,{className:"button",to:"/search"},"Add a book")))}})))))}}]),a}(r.a.Component);a(36);s.a.render(r.a.createElement(x.a,null,r.a.createElement(F,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.20393be5.chunk.js.map